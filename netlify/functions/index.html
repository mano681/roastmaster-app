<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RoastMaster - AI Savage Roast Generator</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-black">
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;
    const { createRoot } = ReactDOM;

    // Lucide icons as components
    const Flame = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>;
    
    const Crown = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></svg>;
    
    const Heart = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>;
    
    const Lightbulb = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>;
    
    const Users = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
    
    const Settings = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>;
    
    const Share2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>;
    
    const Bookmark = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"/></svg>;
    
    const Zap = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>;
    
    const Trophy = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>;
    
    const ArrowRight = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>;
    
    const Check = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>;

    const RoastMasterApp = () => {
      const [step, setStep] = useState('welcome');
      const [username, setUsername] = useState('');
      const [usernameInput, setUsernameInput] = useState('');
      const [activeCharacter, setActiveCharacter] = useState('amma');
      const [currentRoast, setCurrentRoast] = useState('');
      const [isGenerating, setIsGenerating] = useState(false);
      const [userStats, setUserStats] = useState({ roasts: 0, rank: 'Rookie', savage: 0 });
      const [chatHistory, setChatHistory] = useState([]);
      const [userMessage, setUserMessage] = useState('');
      const [error, setError] = useState('');

      const characters = {
        amma: {
          name: "Desi Amma",
          emoji: "ðŸª”",
          icon: Crown,
          gradient: "from-orange-500 to-red-600",
          borderGlow: "shadow-[0_0_20px_rgba(255,68,0,0.5)]",
          description: "Your savage Pakistani mom who roasts with love",
          systemPrompt: "You are a hilarious Pakistani desi mom (Amma Ji) who roasts people with love but savage humor. Use Urdu/English mix, call them 'beta' or 'bachcha', reference traditional desi things like chai, rishtas, and family drama. Be brutally honest but funny. Keep responses under 50 words. Use emojis sparingly."
        },
        bestie: {
          name: "Savage Bestie",
          emoji: "ðŸ’…",
          icon: Heart,
          gradient: "from-red-500 to-orange-600",
          borderGlow: "shadow-[0_0_20px_rgba(255,34,0,0.5)]",
          description: "Gen-Z energy with no filter",
          systemPrompt: "You are a savage Gen-Z best friend with zero filter. Use modern slang, be sassy and witty. Reference social media, memes, and pop culture. Roast hard but make it funny. Keep responses under 50 words. Use emojis like ðŸ’€ðŸ˜­ðŸ™„ðŸ’…."
        },
        ustaad: {
          name: "Ustaad Ji",
          emoji: "ðŸ“š",
          icon: Lightbulb,
          gradient: "from-yellow-500 to-orange-600",
          borderGlow: "shadow-[0_0_20px_rgba(255,200,0,0.5)]",
          description: "Wise Urdu teacher with cutting wisdom",
          systemPrompt: "You are a wise but savage Urdu teacher (Ustaad Ji) who roasts students with poetic burns. Mix Urdu words with English, reference literature and grammar, be witty and intellectual with your roasts. Call them 'janab' or 'beta'. Keep responses under 50 words."
        },
        roastBestie: {
          name: "Roast Your Bestie",
          emoji: "ðŸŽ¯",
          icon: Users,
          gradient: "from-orange-500 to-red-600",
          borderGlow: "shadow-[0_0_20px_rgba(255,100,0,0.5)]",
          description: "Describe your friend, we'll roast them",
          systemPrompt: "You roast people based on descriptions provided. Be creative, funny, and savage. Use the details given to create personalized burns. Reference their habits, appearance, or personality traits mentioned. Keep responses under 50 words. Make it shareable and hilarious."
        }
      };

      const callBackendAPI = async (userMsg) => {
        try {
          const response = await fetch('/.netlify/functions/roast', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              message: userMsg,
              character: activeCharacter,
              systemPrompt: characters[activeCharacter].systemPrompt
            })
          });

          if (!response.ok) {
            throw new Error('Failed to generate roast');
          }

          const data = await response.json();
          return data.roast;
        } catch (err) {
          console.error('API Error:', err);
          setError('Failed to generate roast. Please try again!');
          return null;
        }
      };

      const sendMessage = async () => {
        if (!userMessage.trim()) return;
        
        setError('');
        setChatHistory([...chatHistory, { type: 'user', text: userMessage }]);
        const msgToSend = userMessage;
        setUserMessage('');
        setIsGenerating(true);
        
        const roast = await callBackendAPI(msgToSend);
        
        if (roast) {
          setChatHistory(prev => [...prev, { type: 'roast', text: roast }]);
          setCurrentRoast(roast);
          setUserStats(prev => ({ 
            ...prev, 
            roasts: prev.roasts + 1,
            savage: Math.min(100, prev.savage + 5)
          }));
        }
        
        setIsGenerating(false);
      };

      const saveUsername = () => {
        if (usernameInput.trim()) {
          setUsername(usernameInput);
          setStep('home');
        }
      };

      const shareRoast = () => {
        if (currentRoast) {
          const text = encodeURIComponent(`ðŸ”¥ RoastMaster: ${currentRoast}\n\nGet roasted too!`);
          window.open(`https://wa.me/?text=${text}`, '_blank');
        }
      };

      if (step === 'welcome') {
        return (
          <div className="min-h-screen bg-black text-white flex items-center justify-center p-6">
            <div className="max-w-md w-full text-center space-y-8">
              <div className="relative inline-block">
                <div className="absolute inset-0 animate-pulse bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 rounded-full blur-xl opacity-50"></div>
                <div className="relative bg-gradient-to-r from-red-600 to-orange-600 p-8 rounded-full">
                  <div className="w-20 h-20 flex items-center justify-center"><Flame /></div>
                </div>
              </div>
              
              <h1 className="text-5xl font-bold bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 bg-clip-text text-transparent animate-pulse" 
                  style={{textShadow: '0 0 30px rgba(255,68,0,0.5)'}}>
                I'm RoastMaster
              </h1>
              
              <p className="text-gray-300 text-lg">
                Your AI-powered weapon for savage, witty roasts that'll leave everyone burned ðŸ”¥
              </p>
              
              <div className="space-y-4 text-left">
                {['4 Unique Roasting Characters', 'AI-Powered Savage Comebacks', 'Share & Save Your Favorite Roasts'].map((feature, i) => (
                  <div key={i} className="flex items-center gap-3">
                    <div className="w-2 h-2 rounded-full bg-gradient-to-r from-red-500 to-orange-500 animate-pulse"></div>
                    <span className="text-gray-200">{feature}</span>
                  </div>
                ))}
              </div>
              
              <button 
                onClick={() => setStep('characters')}
                className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2"
                style={{boxShadow: '0 0 30px rgba(255,68,0,0.5)'}}>
                Let's Ignite the Flames <Flame />
              </button>
            </div>
          </div>
        );
      }

      if (step === 'characters') {
        return (
          <div className="min-h-screen bg-black text-white p-6">
            <div className="max-w-4xl mx-auto space-y-8">
              <div className="text-center space-y-4">
                <h2 className="text-4xl font-bold bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 bg-clip-text text-transparent"
                    style={{textShadow: '0 0 20px rgba(255,68,0,0.3)'}}>
                  Meet Your Roasters
                </h2>
                <p className="text-gray-400">Choose your weapon of mass destruction</p>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {Object.entries(characters).map(([key, char]) => {
                  const IconComponent = char.icon;
                  return (
                    <div key={key} 
                         className={`bg-gradient-to-br ${char.gradient} p-1 rounded-2xl cursor-pointer transform hover:scale-105 transition-all duration-300 ${char.borderGlow}`}>
                      <div className="bg-black rounded-2xl p-6 h-full space-y-4">
                        <div className="flex items-center gap-4">
                          <div className={`bg-gradient-to-r ${char.gradient} p-4 rounded-xl`}>
                            <div className="w-8 h-8"><IconComponent /></div>
                          </div>
                          <div>
                            <h3 className="text-xl font-bold text-white">{char.name}</h3>
                            <span className="text-3xl">{char.emoji}</span>
                          </div>
                        </div>
                        <p className="text-gray-300">{char.description}</p>
                      </div>
                    </div>
                  );
                })}
              </div>
              
              <button 
                onClick={() => setStep('features')}
                className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 flex items-center justify-center gap-2"
                style={{boxShadow: '0 0 30px rgba(255,68,0,0.5)'}}>
                Continue <ArrowRight />
              </button>
            </div>
          </div>
        );
      }

      if (step === 'features') {
        return (
          <div className="min-h-screen bg-black text-white p-6 flex items-center">
            <div className="max-w-4xl mx-auto space-y-8 w-full">
              <h2 className="text-4xl font-bold text-center bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 bg-clip-text text-transparent"
                  style={{textShadow: '0 0 20px rgba(255,68,0,0.3)'}}>
                Roast Like a Pro
              </h2>
              
              <div className="space-y-6">
                <div className={`bg-gradient-to-r from-red-600 to-orange-600 p-1 rounded-2xl ${characters.amma.borderGlow}`}>
                  <div className="bg-black rounded-2xl p-6 space-y-3">
                    <div className="flex items-center gap-3">
                      <div className="w-8 h-8"><Zap /></div>
                      <h3 className="text-xl font-bold">Savage Meter</h3>
                    </div>
                    <div className="w-full h-4 bg-gray-800 rounded-full overflow-hidden">
                      <div className="h-full bg-gradient-to-r from-green-500 via-yellow-500 via-orange-500 to-red-600 animate-pulse" 
                           style={{width: '75%'}}></div>
                    </div>
                    <p className="text-gray-400 text-sm">Track how savage your roasts are getting!</p>
                  </div>
                </div>

                <div className={`bg-gradient-to-r from-yellow-600 to-orange-600 p-1 rounded-2xl ${characters.ustaad.borderGlow}`}>
                  <div className="bg-black rounded-2xl p-6 space-y-3">
                    <div className="flex items-center gap-3">
                      <div className="w-8 h-8"><Trophy /></div>
                      <h3 className="text-xl font-bold">Leaderboard</h3>
                    </div>
                    <div className="flex gap-4">
                      {[1, 2, 3].map(rank => (
                        <div key={rank} className="flex-1 bg-gray-900 rounded-lg p-3 text-center">
                          <div className={`text-2xl font-bold ${rank === 1 ? 'text-yellow-500' : rank === 2 ? 'text-gray-400' : 'text-orange-600'}`}>
                            #{rank}
                          </div>
                          <div className="text-xs text-gray-500">Player{rank}</div>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>

                <div className={`bg-gradient-to-r from-red-600 to-pink-600 p-1 rounded-2xl ${characters.bestie.borderGlow}`}>
                  <div className="bg-black rounded-2xl p-6 space-y-3">
                    <div className="flex items-center gap-3">
                      <div className="w-8 h-8"><Share2 /></div>
                      <h3 className="text-xl font-bold">Share Your Burns</h3>
                    </div>
                    <div className="bg-gray-900 rounded-lg p-4 text-sm text-gray-300 italic">
                      "This roast was so fire, it needs its own fire extinguisher! ðŸ”¥"
                    </div>
                    <button className="w-full bg-gradient-to-r from-pink-600 to-red-600 py-2 rounded-lg text-sm font-semibold">
                      Share on WhatsApp
                    </button>
                  </div>
                </div>
              </div>
              
              <button 
                onClick={() => setStep('complete')}
                className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 flex items-center justify-center gap-2"
                style={{boxShadow: '0 0 30px rgba(255,68,0,0.5)'}}>
                Continue <ArrowRight />
              </button>
            </div>
          </div>
        );
      }

      if (step === 'complete') {
        return (
          <div className="min-h-screen bg-black text-white flex items-center justify-center p-6">
            <div className="max-w-md w-full text-center space-y-8">
              <div className="relative inline-block">
                <div className="absolute inset-0 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 rounded-full blur-2xl opacity-50"></div>
                <div className="relative bg-gradient-to-r from-red-600 to-orange-600 p-12 rounded-full">
                  <div className="w-24 h-24 flex items-center justify-center"><Flame /></div>
                </div>
              </div>
              
              <h2 className="text-4xl font-bold bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 bg-clip-text text-transparent"
                  style={{textShadow: '0 0 20px rgba(255,68,0,0.3)'}}>
                Ready to Roast?
              </h2>
              
              <div className="space-y-4">
                {[
                  { icon: Zap, text: 'Unlimited Savage Roasts' },
                  { icon: Trophy, text: 'Climb the Leaderboard' },
                  { icon: Bookmark, text: 'Save Your Favorites' }
                ].map((item, i) => {
                  const IconComponent = item.icon;
                  return (
                    <div key={i} className="flex items-center gap-4 bg-gray-900 rounded-xl p-4">
                      <div className="bg-gradient-to-r from-red-600 to-orange-600 p-3 rounded-lg">
                        <div className="w-6 h-6"><IconComponent /></div>
                      </div>
                      <span className="text-gray-200 font-semibold">{item.text}</span>
                    </div>
                  );
                })}
              </div>
              
              <div className="space-y-3">
                <button 
                  onClick={() => setStep('username')}
                  className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 flex items-center justify-center gap-2"
                  style={{boxShadow: '0 0 30px rgba(255,68,0,0.5)'}}>
                  Start Roasting <ArrowRight />
                </button>
              </div>
            </div>
          </div>
        );
      }

      if (step === 'username') {
        return (
          <div className="min-h-screen bg-black text-white flex items-center justify-center p-6">
            <div className="max-w-md w-full space-y-8">
              <div className="text-center space-y-4">
                <div className="w-16 h-16 mx-auto flex items-center justify-center"><Flame /></div>
                <h2 className="text-3xl font-bold bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 bg-clip-text text-transparent">
                  What Should We Call You?
                </h2>
                <p className="text-gray-400">Choose your roast name wisely... ðŸ”¥</p>
              </div>
              
              <div className="space-y-4">
                <input
                  type="text"
                  value={usernameInput}
                  onChange={(e) => setUsernameInput(e.target.value)}
                  placeholder="Enter your username"
                  className="w-full bg-gray-900 border-2 border-orange-600 rounded-xl px-6 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500 transition-colors"
                  style={{boxShadow: '0 0 20px rgba(255,136,0,0.2)'}}
                  onKeyPress={(e) => e.key === 'Enter' && saveUsername()}
                />
                
                <button 
                  onClick={saveUsername}
                  disabled={!usernameInput.trim()}
                  className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 disabled:from-gray-700 disabled:to-gray-600 disabled:cursor-not-allowed text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 flex items-center justify-center gap-2"
                  style={{boxShadow: usernameInput.trim() ? '0 0 30px rgba(255,68,0,0.5)' : 'none'}}>
                  Let's Go <Check />
                </button>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-black text-white">
          <div className="sticky top-0 bg-gray-900 border-b border-gray-800 px-6 py-4 flex items-center justify-between z-10"
               style={{boxShadow: '0 4px 20px rgba(255,68,0,0.1)'}}>
            <div className="flex items-center gap-3">
              <div className="bg-gradient-to-r from-red-600 to-orange-600 p-2 rounded-lg">
                <div className="w-6 h-
